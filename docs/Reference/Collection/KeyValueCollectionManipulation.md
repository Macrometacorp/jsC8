## KV (Key value)

The **KV**  feature allows us to insert data in the key value format, 
where "_key" is a unique field which allows you to track the entries and "value" is a string
or json object.

## client.getKVCollections

`async client.getKVCollections()`

Lists all collections

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.getKVCollections();
```

## client.getKVCount

`async client.getKVCount(collectionName)`

Gets kv count in given collection

**Arguments**

- **collectionName**: `string`

  Name of the collection

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.getKVCount('some-collection');
```

## client.getKVKeys

`async client.getKVKeys(collectionName, opts)`

Gets keys from given collection

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **opts**: `Object` (optional)

    - **offset**: `string`

        This option can be used to simulate paging. Default 0

    - **limit**: `string`

        This option can be used to simulate paging. Limit the result. Default 20, max 100

    - **order**: `string`

        Order the results asc or desc. Default asc

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.getKVKeys('some-collection');
```

## client.getValueForKey

`async client.getValueForKey(collectionName, key)`

Returns value for given key

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **key**: `string`

    Name of the key

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.getValueForKey('some-collection', 'some-key');
```

## client.createKVCollection

`async client.createKVCollection(collectionName, [opts])`

Create a new KV collection

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **opts**: `Object` (optional) 

    - **expiration**: `boolean` (optional)

        If it is set then this namespace supports TTL. Default is false.
    
    - **stream**: `boolean` (optional)

        If it is set to true then creates a local stream for collection. Default is false.

    - **waitForSync**: `boolean` (optional)

        If true then creating or changing a document will wait until the data has been synchronized to disk. Default is false.

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.createKVCollection('some-collection');
//---- OR ----
const result = await client.createKVCollection('some-collection', { expiration: true, stream: true });

```

## client.insertKVPairs

`async client.insertKVPairs(collectionName, keyValuePairs)`

Set one or more key-value pairs in given collection.
If the input is an array of objects then KV pairs are created in batch.
Specify expiration in UTC timestamp.

Note:- Max limit is 100 KV pairs per request.

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **keyValuePairs**: `Array<Object>`
    
    Object consists of below params.

    **_key** - if it is not set, it will be generated by the system

    **value** - string or json object. Mandatory
    
    **expireAt** - unix timestamp, indicating when the value will expire (-1 means no expiration)

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});


const keyValuePairs = [
    {
        "_key": "string",
        "value": "string",
        "expireAt": 0
    },

    {
        "_key": "string",
        "value": "string",
        "expireAt": 0
    }
];

const result = await client.insertKVPairs('some-collection', keyValuePairs);
```

## client.deleteEntryForKey

`async client.deleteEntryForKey(collectionName, key)`

Delete entry for given key

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **key**: `string`

    Name of the key

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.deleteEntryForKey('some-collection', 'some-key');
```

## client.deleteEntryForKeys

`async client.deleteEntryForKeys(collectionName, keys)`

Delete entry for given keys

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **keys**: `Array<string>`

    List of keys

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.deleteEntryForKeys('some-collection', ['some-key1', 'some-key2']);
```

## client.deleteKVCollection

`async client.deleteKVCollection(collectionName)`

Delete collection

**Arguments**

- **collectionName**: `string`

    Name of the collection

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.deleteKVCollection('some-collection');
```

## client.getKVCollectionValues

`async client.getKVCollectionValues(collectionName, keys, [opts])`

Get collection values

**Arguments**

- **collectionName**: `string`

    Name of the collection

- **keys**: `Array<string>`

    List of keys

- **opts**: `Object` (optional) 

    - **offset**: `number` (optional)

        This option can be used to simulate paging. Default: 0.
    
    - **limit**: `number` (optional)

        This option can be used to simulate paging. Limit the result. Default: 20, Max: 100

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.getKVCollectionValues('some-collection', ['some-key1', 'some-key2']);
//---- OR ----
const result = await client.getKVCollectionValues('some-collection', ['some-key1', 'some-key2'], { offset:5, limit: 15 });
```

## client.truncateKVCollectionByName

`async client.truncateKVCollectionByName(collectionName)`

Deletes all KV collection by name

**Arguments**

- **collectionName**: `string`

    Name of the collection

**Examples**

```js
const client = new jsc8({url: "https://gdn1.macrometa.io", token: "XXXX"});
//---- OR ----
const client = new jsc8({url: "https://gdn1.macrometa.io", apiKey: "XXXX"});

const result = await client.truncateKVCollectionByName('some-collection');
```
